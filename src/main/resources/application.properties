# Login Microservice
spring.application.name=ms-login
spring.config.import=optional:classpath:/dev.properties


server.port=${LOGIN_PORT:8085}
server.address=0.0.0.0
eureka.client.service-url.defaultZone=${URL_EUREKA}

# Configuracion para Cloud Run - Registro con URL publica
eureka.instance.hostname=${SERVICE_HOSTNAME:localhost}
eureka.instance.prefer-ip-address=false
eureka.instance.non-secure-port-enabled=false
eureka.instance.secure-port-enabled=true
eureka.instance.secure-port=443
eureka.instance.home-page-url=https://${SERVICE_HOSTNAME}/
eureka.instance.status-page-url=https://${SERVICE_HOSTNAME}/actuator/info
eureka.instance.health-check-url=https://${SERVICE_HOSTNAME}/actuator/health
eureka.instance.lease-renewal-interval-in-seconds=10
eureka.instance.lease-expiration-duration-in-seconds=30

# -------------------------------------------------------------
# Configuracion de Google OAuth
# -------------------------------------------------------------
google.client.id=${GOOGLE_CLIENT_ID}
google.client.secret=${GOOGLE_CLIENT_SECRET}
google.redirect.uri=${GOOGLE_REDIRECT_URI}

# -------------------------------------------------------------
# Configuracion de la Aplicacion y Servidor
# -------------------------------------------------------------

spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.serialization.write-dates-as-timestamps=false
server.forward-headers-strategy=framework

#Configuracion de Redis en render
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT}
spring.data.redis.username=${REDIS_USERNAME}
spring.data.redis.password=${REDIS_PASSWORD}
spring.data.redis.timeout=5000ms
spring.data.redis.database=0
spring.data.redis.ssl.enabled=true
spring.session.store-type=redis
spring.session.redis.flush-mode=on_save

spring.session.redis.save-mode=on_set_attribute
# URL completa para Redis
spring.data.redis.url=${REDIS_URL}

# -------------------------------------------------------------
# Configuracion de Cookies (para OAuth y sesiones)
# -------------------------------------------------------------
# En producciÃ³n (Railway/HTTPS): cookie.secure=true y cookie.same-site=None
# En desarrollo (localhost): cookie.secure=false y cookie.same-site=Lax
cookie.secure=${COOKIE_SECURE:false}
cookie.same-site=${COOKIE_SAME_SITE:Lax}

# -------------------------------------------------------------
# Configuracion de Logs
# -------------------------------------------------------------
logging.level.root=INFO
logging.level.org.springframework.web=INFO
logging.level.com.example.auth=INFO
logging.level.org.springframework.data.redis=INFO
logging.level.io.lettuce.core=INFO
logging.level.org.springframework.data.redis.core.RedisConnectionUtils=WARN